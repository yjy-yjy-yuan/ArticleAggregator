# AI学生文章聚合器 - 前端测试说明

## 端口信息

**后端服务端口：8765**

- API地址：`http://localhost:8765/api/`
- 前端地址：`http://localhost:8765/`

## 运行步骤

### 1. 启动后端服务

```bash
cd G:\ArticleAggregator\backend
python main.py
```

预期输出：
```
🚀 Starting ArticleAggregator Backend...
✅ Backend started successfully!
INFO:     Uvicorn running on http://0.0.0.0:8765 (Press CTRL+C to quit)
```

### 2. 初始化RSS源（首次运行）

在另一个终端窗口：

```bash
cd G:\ArticleAggregator\backend
python init_rss.py
```

按提示操作：
- 输入 `y` 抓取文章
- 输入 `y` 提取全文

### 3. 访问前端页面

打开浏览器，访问：

```
http://localhost:8765/
```

## 页面功能

### 主页（index.html）

**功能：**
- 显示所有文章批次的卡片
- 每个卡片显示批次号、日期、文章数量
- 卡片命名格式：
  - "精选文章 第X期"
  - "第X次拉取"

**操作：**
- 点击卡片：跳转到批次详情页
- 点击"刷新"：重新加载批次列表
- 点击"抓取新文章"：触发后端RSS抓取

### 批次详情页（batch.html）

**功能：**
- 显示指定批次的所有文章
- 文章以条目形式列出

**每个文章条目包含：**
- 序号（圆形徽章）
- 文章标题（可点击跳转原文）
- 作者（如有）
- 文章摘要
- 发布日期
- "阅读原文"链接

**操作：**
- 点击"返回"：返回主页
- 点击文章标题或"阅读原文"：在新标签页打开原文

## API端点

### 批次管理

**获取批次列表**
```
GET http://localhost:8765/api/batches
```

**获取批次文章**
```
GET http://localhost:8765/api/batches/{date}/articles
```

### 文章管理

**获取文章列表**
```
GET http://localhost:8765/api/articles?skip=0&limit=10
```

**获取单篇文章**
```
GET http://localhost:8765/api/articles/{article_id}
```

### RSS抓取

**手动触发抓取**
```
POST http://localhost:8765/api/rss/fetch
```

**提取文章全文**
```
POST http://localhost:8765/api/rss/extract-content
```

## 预期效果

### 主页效果
- 卡片式布局，每个卡片代表一个批次
- 渐变紫色背景
- 悬停卡片时有阴影和上浮效果
- 显示批次号、日期、文章数量

### 批次详情页效果
- 文章列表，每个条目包含序号、标题、摘要
- 清晰的层次结构
- 可点击的链接跳转到原文
- 响应式设计，适配移动端

## 测试建议

1. **首次运行**：先运行 `init_rss.py` 导入RSS源并抓取文章
2. **等待抓取**：初次抓取可能需要几分钟，因为要抓取25个RSS源
3. **查看效果**：抓取完成后访问前端页面
4. **测试交互**：点击卡片、查看文章、测试各种按钮

## 故障排查

### 前端显示空白
- 检查后端是否启动（访问 `http://localhost:8765/api/health`）
- 检查浏览器控制台是否有错误
- 确认数据库中是否有文章数据

### 没有文章显示
- 运行 `python init_rss.py` 抓取文章
- 或点击前端的"抓取新文章"按钮

### CORS错误
- 后端已配置允许所有来源，不应出现CORS错误
- 如出现，检查 `main.py` 中的 CORS 配置

## 目录结构

```
G:\ArticleAggregator\
├── backend\
│   ├── main.py           # 主服务
│   ├── init_rss.py       # RSS初始化
│   ├── api\
│   │   ├── articles.py   # 文章API
│   │   ├── rss_sources.py # RSS源API
│   │   └── batches.py    # 批次API（新增）
│   └── ...
├── frontend\
│   ├── index.html        # 主页
│   ├── batch.html        # 批次详情页
│   └── style.css         # 样式文件
└── rss_sources_for_ai_students.opml  # RSS源配置
```
